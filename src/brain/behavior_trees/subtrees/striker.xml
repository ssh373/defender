<root BTCPP_format="4" >
   <include path="./cam_find_and_track_ball.xml" />
   <include path="./locate.xml" />
   <BehaviorTree ID="Striker">
      <ReactiveSequence>
         <SelfLocate mode="trust_direction" />
         <SubTree ID="Locate" _autoremap="true" _while="decision!='find'" />
         <ReactiveSequence _while="wait_for_opponent_kickoff" name="상대 팀의 킥오프를 대기 중"> 
            <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
            <SetVelocity />
         </ReactiveSequence>
         <ReactiveSequence _while="!wait_for_opponent_kickoff" name="정상 경기(우리 킥오프 또는 상대 킥오프)">
            <Sequence _while="ball_out">
               <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
               <!--<GoBackInField />-->
               <SubTree ID="Locate" _autoremap="true" _while="decision!='find'" />
            </Sequence>
            <ReactiveSequence _while="!ball_out">
               <ReactiveSequence >
                  <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
                  <CalcKickDir />
                  <Sequence>
                     <ReactiveSequence>
                        <StrikerDecide decision_out="{decision}" decision_in="{decision}" chase_threshold="1.0" />
                        <!-- <SubTree ID="FindBall" _while="decision=='find'" _autoremap="true" /> -->
                     </ReactiveSequence> <!-- 모듈화된 클래스 사용, ::tick() 함수 실행 -->
                        <!--<Assist _while="decision == 'assist'" vx_limit = "0.2" vy_limit="0.2" />-->
                        <Chase   _while="decision == 'chase'"  vx_limit="0.9"  vy_limit="0.2"  vtheta_limit="1.0"  dist="0.1" safe_dist="0.5" />
                        <Adjust _while="decision =='adjust'" turn_threshold="0.5" range="0.4" vx_limit="0.7" vy_limit="0.6" vtheta_limit="1.5" vtheta_factor="1.5" tangential_speed_far="0.7" tangential_speed_near="0.15" />
                        <Kick _while="decision == 'kick'" speed_limit="0.8" min_msec_kick="1000" msecs_stablize="1000"/>
                        <Kick _while="decision == 'cross'" speed_limit="0.4" min_msec_kick="300"/>
                  </Sequence>
               </ReactiveSequence>
            </ReactiveSequence>
         </ReactiveSequence>
      </ReactiveSequence>
   </BehaviorTree>
</root>
